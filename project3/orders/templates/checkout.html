{% extends 'base.html'%}

{% block head %}
{% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/stripe.css' %}">
<script>
    function updateOrderStatus(){

        var jqXHR = $.ajax({
            type: "POST",
            url: "/checkout",
            async: false,
            data:{'csrfmiddlewaretoken': '{{csrf_token}}'}, 
            success: function(result){
                alert("Order has been successfully placed.");
                window.location.pathname = '/orderhistory';
            },
            error: function(result){
              alert(result.responseJSON.message);
            }
    
        });
    }

    var card = elements.create('card', {style: style});
	// Add an instance of the card Element into the `card-element` <div>.
	card.mount('#card-element');


</script>
    
{%endblock%}

{% block body %}
<form method = "POST">
{%csrf_token%}
<div class="form-row">
    <label for="card-element">
      Credit or debit card
    </label>
    <div id="card-element">
      <!-- A Stripe Element will be inserted here. -->
    </div>

    <!-- Used to display form errors. -->
    <div id="card-errors" role="alert"></div>
    <div style="clear:left"></div>
    <hr>
    <input class="myButton" style="background-color:#10a195" type="submit" value="Submit Payment" name="">
</div>
</form>
{%endblock%}