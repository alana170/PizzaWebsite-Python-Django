{% extends "base.html" %}

{% block head %}
<title> Home </title>
<script type="text/javascript">

  function addToCart(productID, size){
   
    var jqXHR = $.ajax({
        type: "POST",
        url: "/addCart",
        async: false,
        data:{'product_id': productID, 'size':size, 'csrfmiddlewaretoken': '{{csrf_token}}'}, 
        success: function(result){
          
          $('#mycart').append('<tr><td>' + result.name+'</td><td>' +result.size + '</td><td>' +'$'+result.price + '</td></tr>');
          document.getElementById("total").innerHTML = "Total = $" + result.total;    
        },
        error: function(result){
          alert(result.responseJSON.message);
        }

    });
}


</script>
{% endblock %}


{%block body %}
<nav class="navbar fixed-nav-bar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Pinocchio's Pizza and Subs</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="#rp">Regular Pizza</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#sp">Sicilian Pizza</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#top">Toppings</a>
          </li>
        <li class="nav-item">
          <a class="nav-link" href="#subs">Subs</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#pasta">Pastas</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#salad">Salads</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#dp">Dinner Platters</a>
        </li>

        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                {{user.first_name}}'s Account
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="#">My Profile</a>
              <a class="dropdown-item" href="#">My Orders</a>
              <a class="dropdown-item" href="#">Favorites</a>
            </div>
          </li>

        <form action="/cart"  method = "POST">
        <button style ="padding:20px;" class="btn btn-outline-success centered" type="submit">
          {% csrf_token %}
          <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-cart3" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
          </svg>
          My Cart
        </button>
        </form>
       </ul>
    </div>
  </nav>
  <div id= "rp">

  </div>
<div class="container-fluid">
<div style ="padding-top: 65px;"  class="row" >
  <div class ="col-sm-8" style="background-color:rgb(224, 166, 166); height: auto;">
    <div class="container">
      <h2 style= "font-weight:bolder;">
        <div class= "row"> 
        <div class ="col-sm-4"> Regular Pizza </div>
        <div class ="col-sm-4"> Small </div>
        <div class ="col-sm-4"> Large </div>
        </div>
      </h2>
    
    
    {% for product in regular_pizza %}
   
    <h3>
      <div class= "row"> 
      <div class ="col-sm-4"> {{product.name}} </div>

      <div class ="col-sm-4"> ${{product.SPrice}} 
          
        <button onclick ="addToCart({{product.id}}, 'small')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
      </div>
      
      <div class ="col-sm-4"> ${{product.LPrice}} 
        <button onclick ="addToCart({{product.id}}, 'large')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
      </div>

      </div>
    </h3>
    {%endfor%}

    
      <div class="container">
  
        <div class="row">
          <div class="col-md-4">
            <div class="thumbnail">  
              <img src = "/static/cheese.jpg" alt ="cheese"> 
            </div>
          </div>

          <div class="col-md-4">
            <div class="thumbnail" id = "sp">
             
              <img src = "/static/pepperoni.jpg" alt ="pep" > 
      
            </div>
          </div>
          
        </div>
      </div>
      
    

    <hr class="solid">
    <h2 style= "font-weight:bolder;">
      <div class= "row"> 
      <div class ="col-sm-4"> Sicilian Pizza </div>
      <div class ="col-sm-4"> Small </div>
      <div class ="col-sm-4"> Large </div>
      </div>
    </h2>
  
  
  {% for product in s_pizza %}
 
  <h3>
    <div class= "row"> 
    <div class ="col-sm-4"> {{product.name}} </div>

    <div class ="col-sm-4"> ${{product.SPrice}}      
      <button onclick ="addToCart({{product.id}}, 'small')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
    </div>
    
    <div class ="col-sm-4"> ${{product.LPrice}} 
      <button onclick ="addToCart({{product.id}}, 'large')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
    </div>

    </div>
  </h3>
  {%endfor%}
<div class = "container">
  <div class="row">
    <div class="col-md-4">
      <div class= "thumbnail" id ="top">  
        <img src = "/static/sicilian.jpg" alt ="sicilian"> 
      </div> 
    </div>
  </div>
</div>


<hr class ="solid">

<h2 > <b> Toppings</b> </h2>
<div class ="container">
<ul class="list-group">
  <li class="list-group-item">Pepperoni</li>
  <li class="list-group-item">Sausage</li>
  <li class="list-group-item">Mushrooms</li>
  <li class="list-group-item">Onions</li>
  <li class="list-group-item"> Ham </li>
  <li class="list-group-item">Canadian Bacon</li>
  <li class="list-group-item">Pineapple</li>
  <li class="list-group-item">Eggplant</li>
  <li class="list-group-item">Tomato and Basil</li>
  <li class="list-group-item"> Green Peppers </li>
  <li class="list-group-item">Hamburger</li>
  <li class="list-group-item">Spinach</li>
  <li class="list-group-item">Artichoke</li>
  <li class="list-group-item"> Buffalo Chicken </li>
  <li class="list-group-item">Barbeque Chicken </li>
  <li id = "subs" class="list-group-item">Anchovies</li>
  <li class="list-group-item">Black Olives</li>
  <li class="list-group-item">Fresh Garlic </li>
  <li class="list-group-item">Zucchini </li>
</ul>
</div>

  <hr class="solid">

  <h2 style= "font-weight:bolder;">
    <div class= "row"> 
    <div class ="col-sm-4"> Subs </div>
    <div class ="col-sm-4"> Small </div>
    <div class ="col-sm-4"> Large </div>
    </div>
  </h2>


{% for product in subs %}

<h3>
  <div class= "row"> 
  <div class ="col-sm-4"> {{product.name}} </div>

  <div class ="col-sm-4"> ${{product.SPrice}}      
    <button onclick ="addToCart({{product.id}}, 'small')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
  </div>
  
  <div class ="col-sm-4"> ${{product.LPrice}} 
    <button onclick ="addToCart({{product.id}}, 'large')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
  </div>

  </div>
</h3>
{%endfor%}

<div class = "container">
  <div class="row">
    <div class="col-md-4">
      <div class= "thumbnail" id ="pasta">  
        <img src = "/static/sub2.jpg" alt ="subs"> 
      </div> 
    </div>
  </div>
</div>

    <hr class="solid">
    <h2 style= "font-weight:bolder;">
      <div class= "row"> 
      <div class ="col-sm-4"> Pasta </div>
      <div class ="col-sm-4">  </div>
      <div class ="col-sm-4">  </div>
      </div>
    </h2>
  
  
  {% for product in pasta %}
 
  <h3>
    <div class= "row"> 
    <div class ="col-sm-4"> {{product.name}} </div>

    <div class ="col-sm-4">
    </div>
    
    <div class ="col-sm-4"> ${{product.SPrice}} 
      <button onclick ="addToCart({{product.id}}, 'small')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
    </div>

    </div>
  </h3>
  {%endfor%}

  <div class = "container">
    <div class="row">
      <div class="col-md-4">
        <div class= "thumbnail"  id = "salad">  
          <img src = "/static/pasta.jpg" alt ="pasta"> 
        </div> 
      </div>
    </div>
  </div>

  
  <hr class="solid">
  <h2 style= "font-weight:bolder;">
    <div class= "row"> 
    <div class ="col-sm-4"> Salad </div>
    <div class ="col-sm-4">  </div>
    <div class ="col-sm-4">  </div>
    </div>
  </h2>


{% for product in salad %}

<h3>
  <div class= "row"> 
  <div class ="col-sm-4"> {{product.name}} </div>

  <div class ="col-sm-4">   
  
  </div>
  
  <div class ="col-sm-4"> ${{product.SPrice}} 
    <button onclick ="addToCart({{product.id}}, 'small')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
  </div>

  </div>
</h3>
{%endfor%}

<div class = "container">
  <div class="row">
    <div class="col-md-4">
      <div class= "thumbnail" id = "dp">  
        <img src = "/static/salad.jpg" alt ="salad"> 
      </div> 
    </div>
  </div>
</div>


<hr class="solid">
<h2 style= "font-weight:bolder;">
  <div class= "row"> 
  <div class ="col-sm-4"> Dinner Platters  </div>
  <div class ="col-sm-4"> Small </div>
  <div class ="col-sm-4"> Large </div>
  </div>
</h2>


{% for product in dinner %}

<h3>
<div class= "row"> 
<div class ="col-sm-4"> {{product.name}} </div>

<div class ="col-sm-4"> ${{product.SPrice}}      
  <button onclick ="addToCart({{product.id}}, 'small')" class="btn btn-dark"> <span class="glyphicon glyphicon-plus"></span></button>
</div>

<div class ="col-sm-4"> ${{product.LPrice}} 
  <button onclick ="addToCart({{product.id}}, 'large')" class="btn btn-dark"><span class="glyphicon glyphicon-plus"></span></button>
</div>

</div>
</h3>
{%endfor%}

<div class = "container">
  <div class="row">
    <div class="col-md-4">
      <div class= "thumbnail">  
        <img src = "/static/platter.jpg" alt ="platter"> 
      </div> 
    </div>
  </div>
</div>



    </div>
  </div>
<div class ="col-sm-4" style="background-color: rgb(250, 250, 226); height: 300vh">
        <h1>Shopping Cart</h1>
        <div>
          <table class ="table table-dark" id="mycart" >
            <th scope ="col">
              Product Name 
            </th>
            <th scope ="col">
              Size
            </th>
            <th scope ="col">
              Price
            </th>
          </table> 
          <hr> 
          <h3 scope="row" style ="float:right" id = "total"> </h3>
        </div>
</div>
</div>


{% endblock %}